import{a as B}from"./chunk-EUNHHBPD.js";import{a as T}from"./chunk-MLA7JCDT.js";import{a as G,b as c,c as R,d as N,g as D,h as I,i as V,n as A,p as z}from"./chunk-AXTZQWN6.js";import{a as P}from"./chunk-U6LSLWSJ.js";import{A as b,B as w,Ga as y,H as F,J as S,Ma as L,Na as k,Pa as M,S as a,W as E,ca as u,da as d,ea as f,fa as t,ga as n,ha as m,k as _,ma as x,oa as v,pa as C,qa as l,ra as h,u as g}from"./chunk-OHUVKFVV.js";function j(r,i){if(r&1&&(t(0,"div",6),b(),t(1,"svg",26),m(2,"path",27),n(),w(),t(3,"span"),l(4),n()()),r&2){let o=v();a(4),h(o.errorMessage())}}function U(r,i){if(r&1&&(t(0,"span",12),l(1),n()),r&2){let o=v();a(),h(o.formUtils.getFieldError(o.loginForm,"email"))}}function W(r,i){if(r&1&&(t(0,"span",12),l(1),n()),r&2){let o=v();a(),h(o.formUtils.getFieldError(o.loginForm,"password"))}}function q(r,i){r&1&&(m(0,"span",28),l(1," Iniciando sesi\xF3n... "))}function O(r,i){r&1&&l(0," Iniciar Sesi\xF3n ")}var H=class r{fb=g(A);authService=g(T);router=g(L);loginForm;loginTrigger=F(null);loginResource=P({params:()=>this.loginTrigger(),stream:({params:i})=>i?this.authService.login(i.email,i.password):_(null)});formUtils=B;constructor(){this.loginForm=this.fb.group({email:["",[c.required,c.email]],password:["",[c.required,c.minLength(6)]]}),S(()=>{this.loginResource.hasValue()&&this.loginResource.value()&&(console.log("Login exitoso, navegando a /inicio"),this.router.navigate(["/inicio"]))})}onSubmit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}let{email:i,password:o}=this.loginForm.value;this.loginTrigger.set({email:i,password:o})}loginWithGoogle(){this.authService.loginWithGoogle().subscribe({next:()=>{this.router.navigate(["/inicio"])},error:i=>{console.error("Error al iniciar sesi\xF3n con Google:",i)}})}loading=this.loginResource.isLoading;errorMessage=()=>{let i=this.loginResource.error();if(!i)return"";let o=i.code||"";return{"auth/invalid-email":"El correo electr\xF3nico no es v\xE1lido","auth/user-disabled":"El usuario ha sido deshabilitado","auth/user-not-found":"No existe un usuario con este correo","auth/wrong-password":"Contrase\xF1a incorrecta","auth/invalid-credential":"Credenciales inv\xE1lidas"}[o]||"Error al iniciar sesi\xF3n"};get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=E({type:r,selectors:[["app-login-page"]],decls:41,vars:11,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-linear-to-br","from-primary","to-secondary","p-4"],[1,"card","w-full","max-w-md","bg-base-100","shadow-2xl"],[1,"card-body"],[1,"text-center","mb-6"],[1,"text-3xl","font-bold","text-primary","mb-2"],[1,"text-base-content/70"],[1,"alert","alert-error","mb-4"],[3,"ngSubmit","formGroup"],[1,"form-control","mb-6"],[1,"label"],[1,"label-text"],["type","email","formControlName","email","placeholder","ejemplo@correo.com",1,"input","input-bordered","w-full","placeholder:opacity-25"],[1,"block","text-red-500","text-sm","mt-1"],["type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"input","input-bordered","w-full","placeholder:opacity-25"],[1,"form-control","mt-6"],["type","submit",1,"btn","btn-primary","w-full",3,"disabled"],[1,"divider"],["type","button",1,"btn","btn-outline","w-full",3,"click","disabled"],["viewBox","0 0 24 24",1,"w-5","h-5"],["fill","currentColor","d","M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"],["fill","currentColor","d","M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"],["fill","currentColor","d","M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"],["fill","currentColor","d","M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"],[1,"text-center","mt-4"],[1,"text-sm","text-base-content/70"],["routerLink","/register",1,"link","link-primary","font-semibold"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"h-6","w-6","shrink-0","stroke-current"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"loading","loading-spinner","loading-sm"]],template:function(o,e){if(o&1&&(t(0,"section")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1",4),l(6,"\xA1Bienvenido!"),n(),t(7,"p",5),l(8,"Inicia sesi\xF3n para continuar"),n()(),u(9,j,5,1,"div",6),t(10,"form",7),x("ngSubmit",function(){return e.onSubmit()}),t(11,"div",8)(12,"label",9)(13,"span",10),l(14,"Correo electr\xF3nico"),n()(),m(15,"input",11),u(16,U,2,1,"span",12),n(),t(17,"div",8)(18,"label",9)(19,"span",10),l(20,"Contrase\xF1a"),n()(),m(21,"input",13),u(22,W,2,1,"span",12),n(),t(23,"div",14)(24,"button",15),u(25,q,2,0)(26,O,1,0),n()()(),t(27,"div",16),l(28,"O"),n(),t(29,"button",17),x("click",function(){return e.loginWithGoogle()}),b(),t(30,"svg",18),m(31,"path",19)(32,"path",20)(33,"path",21)(34,"path",22),n(),l(35," Continuar con Google "),n(),w(),t(36,"div",23)(37,"p",24),l(38," \xBFNo tienes cuenta? "),t(39,"a",25),l(40," Reg\xEDstrate aqu\xED "),n()()()()()()()),o&2){let s,p;a(9),d(e.loginResource.error()?9:-1),a(),f("formGroup",e.loginForm),a(5),C("input-error",(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched)),a(),d((s=e.loginForm.get("email"))!=null&&s.invalid&&((s=e.loginForm.get("email"))!=null&&s.touched)?16:-1),a(5),C("input-error",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),a(),d((p=e.loginForm.get("password"))!=null&&p.invalid&&((p=e.loginForm.get("password"))!=null&&p.touched)?22:-1),a(2),f("disabled",e.loading()||e.loginForm.invalid),a(),d(e.loading()?25:26),a(4),f("disabled",e.loading())}},dependencies:[y,M,k,z,D,G,R,N,V,I],encapsulation:2})};export{H as LoginPage};
