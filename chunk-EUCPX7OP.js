import{a as D,b as u,c as G,d as L,e as V,f as I,g as U,h as j,i as q,j as A}from"./chunk-K2FJPSMG.js";import{E as N,q as T}from"./chunk-EHKQ256W.js";import{b as R,f as y,g as M,i as k}from"./chunk-QWAFE7JD.js";import{$ as C,$a as m,Ca as a,Pa as S,U as w,_a as l,aa as _,ab as b,bb as o,cb as n,db as d,ib as E,ka as x,kb as p,lb as h,ma as P,mb as s,nb as g,o as F}from"./chunk-MOZ6KO2I.js";function z(i,r){if(i&1&&(o(0,"div",6),C(),o(1,"svg",21),d(2,"path",22),n(),_(),o(3,"span"),s(4),n()()),i&2){let t=p();a(4),g(t.errorMessage())}}function H(i,r){if(i&1&&(o(0,"span",12),s(1),n()),i&2){let t=p();a(),g(t.formUtils.getFieldError(t.registerForm,"email"))}}function O(i,r){if(i&1&&(o(0,"span",12),s(1),n()),i&2){let t=p();a(),g(t.formUtils.getFieldError(t.registerForm,"password"))}}function Y(i,r){if(i&1&&(o(0,"span",12),s(1),n()),i&2){let t=p();a(),g(t.formUtils.getFieldError(t.registerForm,"confirmPassword"))}}function J(i,r){i&1&&(d(0,"span",23),s(1," Creando cuenta... "))}function K(i,r){i&1&&s(0," Crear Cuenta ")}var B=class i{fb=w(j);authService=w(N);router=w(y);registerForm;registerTrigger=x(null);registerResource=T({params:()=>this.registerTrigger(),stream:({params:r})=>r?this.authService.register(r.email,r.password):F(null)});formUtils=A;constructor(){this.registerForm=this.fb.group({email:["",[u.required,u.email]],password:["",[u.required,u.minLength(6)]],confirmPassword:["",[u.required]]},{validators:this.passwordMatchValidator}),P(()=>{this.registerResource.hasValue()&&this.registerResource.value()&&(console.log("Registro exitoso, navegando a /simpsons"),this.router.navigate(["/simpsons"]))})}passwordMatchValidator(r){let t=r.get("password"),e=r.get("confirmPassword");return t&&e&&t.value!==e.value?(e.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):null}onSubmit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}let{email:r,password:t}=this.registerForm.value;this.registerTrigger.set({email:r,password:t})}loading=this.registerResource.isLoading;errorMessage=()=>{let r=this.registerResource.error();if(!r)return"";let t=r.code||"";return{"auth/email-already-in-use":"Este correo ya est\xE1 registrado","auth/invalid-email":"El correo electr\xF3nico no es v\xE1lido","auth/operation-not-allowed":"Operaci\xF3n no permitida","auth/weak-password":"La contrase\xF1a es muy d\xE9bil"}[t]||"Error al registrar usuario"};get email(){return this.registerForm.get("email")}get password(){return this.registerForm.get("password")}get confirmPassword(){return this.registerForm.get("confirmPassword")}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=S({type:i,selectors:[["app-register-page"]],decls:37,vars:13,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-linear-to-br","from-secondary","to-accent","p-4"],[1,"card","w-full","max-w-md","bg-base-100","shadow-2xl"],[1,"card-body"],[1,"text-center","mb-6"],[1,"text-3xl","font-bold","text-secondary","mb-2"],[1,"text-base-content/70"],[1,"alert","alert-error","mb-4"],[3,"ngSubmit","formGroup"],[1,"form-control"],[1,"label"],[1,"label-text"],["type","email","formControlName","email","placeholder","ejemplo@correo.com",1,"input","input-bordered","w-full"],[1,"block","text-red-500","text-sm","mt-1"],[1,"form-control","mt-4"],["type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"input","input-bordered","w-full"],["type","password","formControlName","confirmPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"input","input-bordered","w-full"],[1,"form-control","mt-6"],["type","submit",1,"btn","btn-secondary","w-full",3,"disabled"],[1,"text-center","mt-4"],[1,"text-sm","text-base-content/70"],["routerLink","/auth/login","routerLink","/auth/login",1,"link","link-secondary","font-semibold"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"stroke-current","shrink-0","h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"loading","loading-spinner","loading-sm"]],template:function(t,e){if(t&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),s(5,"Crear Cuenta"),n(),o(6,"p",5),s(7,"Reg\xEDstrate para comenzar"),n()(),l(8,z,5,1,"div",6),o(9,"form",7),E("ngSubmit",function(){return e.onSubmit()}),o(10,"div",8)(11,"label",9)(12,"span",10),s(13,"Correo electr\xF3nico"),n()(),d(14,"input",11),l(15,H,2,1,"span",12),n(),o(16,"div",13)(17,"label",9)(18,"span",10),s(19,"Contrase\xF1a"),n()(),d(20,"input",14),l(21,O,2,1,"span",12),n(),o(22,"div",13)(23,"label",9)(24,"span",10),s(25,"Confirmar Contrase\xF1a"),n()(),d(26,"input",15),l(27,Y,2,1,"span",12),n(),o(28,"div",16)(29,"button",17),l(30,J,2,0)(31,K,1,0),n()()(),o(32,"div",18)(33,"p",19),s(34," \xBFYa tienes cuenta? "),o(35,"a",20),s(36," Inicia sesi\xF3n aqu\xED "),n()()()()()()),t&2){let c,f,v;a(8),m(e.registerResource.error()?8:-1),a(),b("formGroup",e.registerForm),a(5),h("input-error",(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched)),a(),m((c=e.registerForm.get("email"))!=null&&c.invalid&&((c=e.registerForm.get("email"))!=null&&c.touched)?15:-1),a(5),h("input-error",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),a(),m((f=e.registerForm.get("password"))!=null&&f.invalid&&((f=e.registerForm.get("password"))!=null&&f.touched)?21:-1),a(5),h("input-error",(e.confirmPassword==null?null:e.confirmPassword.invalid)&&(e.confirmPassword==null?null:e.confirmPassword.touched)),a(),m((v=e.registerForm.get("confirmPassword"))!=null&&v.invalid&&((v=e.registerForm.get("confirmPassword"))!=null&&v.touched)?27:-1),a(2),b("disabled",e.loading()||e.registerForm.invalid),a(),m(e.loading()?30:31)}},dependencies:[R,q,V,D,G,L,U,I,k,M],encapsulation:2})};export{B as RegisterPage};
