import{a as j}from"./chunk-EUNHHBPD.js";import{E as G,q as T}from"./chunk-DEIWAWW6.js";import{a as N,b as c,c as V,d as D,g as L,h as z,i as I,n as U,p as H}from"./chunk-QWVEXIWE.js";import{A as b,B as C,Ga as R,H as S,J as E,Ka as y,La as M,Na as k,S as l,W as P,ca as d,da as u,ea as _,fa as i,ga as o,ha as s,k as x,ma as F,oa as g,pa as w,qa as a,ra as p,u as h}from"./chunk-72IGGVW3.js";function A(n,t){if(n&1&&(i(0,"div",6),b(),i(1,"svg",28),s(2,"path",29),o(),C(),i(3,"span"),a(4),o()()),n&2){let r=g();l(4),p(r.errorMessage())}}function B(n,t){if(n&1&&(i(0,"span",12),a(1),o()),n&2){let r=g();l(),p(r.formUtils.getFieldError(r.registerForm,"email"))}}function W(n,t){if(n&1&&(i(0,"span",12),a(1),o()),n&2){let r=g();l(),p(r.formUtils.getFieldError(r.registerForm,"password"))}}function O(n,t){if(n&1&&(i(0,"span",12),a(1),o()),n&2){let r=g();l(),p(r.formUtils.getFieldError(r.registerForm,"confirmPassword"))}}function Y(n,t){n&1&&(s(0,"span",30),a(1," Creando cuenta... "))}function J(n,t){n&1&&a(0," Crear Cuenta ")}var q=class n{fb=h(U);authService=h(G);router=h(y);registerForm;registerTrigger=S(null);registerResource=T({params:()=>this.registerTrigger(),stream:({params:t})=>t?this.authService.register(t.email,t.password):x(null)});formUtils=j;constructor(){this.registerForm=this.fb.group({email:["",[c.required,c.email]],password:["",[c.required,c.minLength(6)]],confirmPassword:["",[c.required]]},{validators:this.passwordMatchValidator}),E(()=>{this.registerResource.hasValue()&&this.registerResource.value()&&(console.log("Registro exitoso, navegando a /simpsons"),this.router.navigate(["/simpsons"]))})}registerWithGoogle(){this.authService.loginWithGoogle().subscribe({next:t=>{console.log("Usuario registrado con Google",t.user),this.router.navigate(["/inicio"])},error:t=>{console.error("Error al registrarse con Google",t)}})}passwordMatchValidator(t){let r=t.get("password"),e=t.get("confirmPassword");return r&&e&&r.value!==e.value?(e.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):null}onSubmit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}let{email:t,password:r}=this.registerForm.value;this.registerTrigger.set({email:t,password:r})}loading=this.registerResource.isLoading;errorMessage=()=>{let t=this.registerResource.error();if(!t)return"";let r=t.code||"";return{"auth/email-already-in-use":"Este correo ya est\xE1 registrado","auth/invalid-email":"El correo electr\xF3nico no es v\xE1lido","auth/operation-not-allowed":"Operaci\xF3n no permitida","auth/weak-password":"La contrase\xF1a es muy d\xE9bil"}[r]||"Error al registrar usuario"};get email(){return this.registerForm.get("email")}get password(){return this.registerForm.get("password")}get confirmPassword(){return this.registerForm.get("confirmPassword")}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=P({type:n,selectors:[["app-register-page"]],decls:46,vars:13,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-linear-to-br","from-secondary","to-accent","p-4"],[1,"card","w-full","max-w-md","bg-base-100","shadow-2xl"],[1,"card-body"],[1,"text-center","mb-6"],[1,"text-3xl","font-bold","text-secondary","mb-2"],[1,"text-base-content/70"],[1,"alert","alert-error","mb-4"],[3,"ngSubmit","formGroup"],[1,"form-control"],[1,"label"],[1,"label-text"],["type","email","formControlName","email","placeholder","ejemplo@correo.com",1,"input","input-bordered","w-full"],[1,"block","text-red-500","text-sm","mt-1"],[1,"form-control","mt-4"],["type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"input","input-bordered","w-full"],["type","password","formControlName","confirmPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"input","input-bordered","w-full"],[1,"divider"],["type","button",1,"btn","btn-outline","w-full",3,"click"],["viewBox","0 0 24 24",1,"w-5","h-5"],["fill","currentColor","d","M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"],["fill","currentColor","d","M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"],["fill","currentColor","d","M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"],["fill","currentColor","d","M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"],[1,"form-control","mt-6"],["type","submit",1,"btn","btn-secondary","w-full",3,"disabled"],[1,"text-center","mt-4"],[1,"text-sm","text-base-content/70"],["routerLink","/auth/login","routerLink","/auth/login",1,"link","link-secondary","font-semibold"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"stroke-current","shrink-0","h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"loading","loading-spinner","loading-sm"]],template:function(r,e){if(r&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),a(5,"Crear Cuenta"),o(),i(6,"p",5),a(7,"Reg\xEDstrate para comenzar"),o()(),d(8,A,5,1,"div",6),i(9,"form",7),F("ngSubmit",function(){return e.onSubmit()}),i(10,"div",8)(11,"label",9)(12,"span",10),a(13,"Correo electr\xF3nico"),o()(),s(14,"input",11),d(15,B,2,1,"span",12),o(),i(16,"div",13)(17,"label",9)(18,"span",10),a(19,"Contrase\xF1a"),o()(),s(20,"input",14),d(21,W,2,1,"span",12),o(),i(22,"div",13)(23,"label",9)(24,"span",10),a(25,"Confirmar Contrase\xF1a"),o()(),s(26,"input",15),d(27,O,2,1,"span",12),o(),i(28,"div",16),a(29,"O"),o(),i(30,"button",17),F("click",function(){return e.registerWithGoogle()}),b(),i(31,"svg",18),s(32,"path",19)(33,"path",20)(34,"path",21)(35,"path",22),o(),a(36," Registrarse con Google "),o(),C(),i(37,"div",23)(38,"button",24),d(39,Y,2,0)(40,J,1,0),o()()(),i(41,"div",25)(42,"p",26),a(43," \xBFYa tienes cuenta? "),i(44,"a",27),a(45," Inicia sesi\xF3n aqu\xED "),o()()()()()()),r&2){let m,f,v;l(8),u(e.registerResource.error()?8:-1),l(),_("formGroup",e.registerForm),l(5),w("input-error",(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched)),l(),u((m=e.registerForm.get("email"))!=null&&m.invalid&&((m=e.registerForm.get("email"))!=null&&m.touched)?15:-1),l(5),w("input-error",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),l(),u((f=e.registerForm.get("password"))!=null&&f.invalid&&((f=e.registerForm.get("password"))!=null&&f.touched)?21:-1),l(5),w("input-error",(e.confirmPassword==null?null:e.confirmPassword.invalid)&&(e.confirmPassword==null?null:e.confirmPassword.touched)),l(),u((v=e.registerForm.get("confirmPassword"))!=null&&v.invalid&&((v=e.registerForm.get("confirmPassword"))!=null&&v.touched)?27:-1),l(11),_("disabled",e.loading()||e.registerForm.invalid),l(),u(e.loading()?39:40)}},dependencies:[R,H,L,N,V,D,I,z,k,M],encapsulation:2})};export{q as RegisterPage};
